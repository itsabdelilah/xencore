<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android">

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:name="io.ads.demo.DemoApp"
        android:allowBackup="true"
        android:dataExtractionRules="@xml/data_extraction_rules"
        android:fullBackupContent="@xml/backup_rules"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:hardwareAccelerated="true"
        android:usesCleartextTraffic="true"
        android:supportsRtl="true"
        android:theme="@style/Theme.Mediation">

        <!--
            AdMob App ID - Required for SDK initialization.

            IMPORTANT: This value can be overridden at runtime via Firebase Remote Config.

            How it works:
            1. This manifest value is the FALLBACK (used if Remote Config is unavailable)
            2. On app start, AdsManager fetches "admob_app_id" from Remote Config
            3. If a remote App ID is configured, it's injected at runtime BEFORE MobileAds.initialize()
            4. This allows switching AdMob accounts without app updates (critical for published apps)

            Implementation: See AdmobAppIdOverride.kt for the runtime override mechanism.

            ⚠️ RISK: Uses undocumented Android API behavior. Falls back to this manifest value if override fails.
        -->
        <meta-data
            android:name="com.google.android.gms.ads.APPLICATION_ID"
            android:value="ca-app-pub-5141318425870910~3343313164" />

        <!-- Optimization flags for better ad performance -->
        <meta-data
            android:name="com.google.android.gms.ads.flag.OPTIMIZE_INITIALIZATION"
            android:value="true"/>

        <meta-data
            android:name="com.google.android.gms.ads.flag.OPTIMIZE_AD_LOADING"
            android:value="true"/>

        <!-- Splash Activity - Now the launcher -->
        <activity
            android:name="io.ads.demo.SplashActivity"
            android:exported="true"
            android:theme="@style/Theme.Mediation">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <!-- Main Activity - No longer the launcher -->
        <activity
            android:name="io.ads.demo.MainActivity"
            android:exported="false" />
    </application>

</manifest>